// Generated by CoffeeScript 1.4.0
(function() {
  var after, should;

  should = chai.should();

  mocha.setup('bdd');

  after = function(time, callback) {
    return setTimeout(callback, time);
  };

  describe('TmpStorage', function() {
    var storage;
    storage = new TmpStorage('test');
    describe('get', function() {
      return it('should serilize/unserilize object', function() {
        storage.setItem('array', [1, 2, 3, 4, 5, 6, 7, 8, 9]);
        return storage.getItem('array').should.deep.equal([1, 2, 3, 4, 5, 6, 7, 8, 9]);
      });
    });
    describe('expires', function() {
      storage.setItem('vanish later', true, '2sec');
      return it('should be available before expiration', function(done) {
        return after(500, function() {
          storage.getItem('vanish later').should.equal(true);
          return done();
        });
      });
    });
    return describe('expires', function() {
      storage.setItem('expires', true, '1sec');
      return it('should vanish after expiration', function(done) {
        return after(1000, function() {
          should.not.exist(storage.getItem('expires'));
          return done();
        });
      });
    });
  });

}).call(this);
